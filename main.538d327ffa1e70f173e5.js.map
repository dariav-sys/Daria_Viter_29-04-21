{"version":3,"sources":["webpack:///./templates/modal-window.hbs","webpack:///./js/localstorage.js","webpack:///./js/refs.js","webpack:///./js/favourite-list.js","webpack:///./js/favourite-btn-handler.js","webpack:///./js/modal-window.js","webpack:///./js/movie-list.js","webpack:///./templates/fav-window.hbs","webpack:///./templates/movie-card.hbs"],"names":["Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","isMovieInFavourites","movie","addedToLocalstorage","JSON","parse","localStorage","getItem","find","id","saveMovieToFavourites","push","setItem","stringify","removeMovieFromFavourites","forEach","splice","indexOf","gallery","document","querySelector","modalContent","overlay","modalWindow","modalFavBtn","closeModalBtn","favSection","favMovies","querySelectorAll","allMovies","markupFavourites","refs","innerHTML","insertAdjacentHTML","markup","favTemplate","length","addEventListener","fetchMovieById","deleteBtns","parseInt","dataset","style","backgroundColor","this","parentNode","removeChild","removeFromFav","markupFavouritesNode","updateFavButton","isEnabled","fetch","then","res","json","classList","remove","movieGenres","genres","el","modalTemplate","onCloseModal","window","onPressKey","modalMarkup","modalFavBtnHandler","catch","err","console","log","removeEventListener","add","event","code","item","movieCardTemplate","starBtns","starBtn","favBtnHandler","markupList","target","nodeName","currentTarget"],"mappings":"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","file":"main.538d327ffa1e70f173e5.js","sourcesContent":["var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"poster-box\\\">\\r\\n    <img class=\\\"poster\\\" src=\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"img\") || (depth0 != null ? lookupProperty(depth0,\"img\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"img\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":28},\"end\":{\"line\":2,\"column\":35}}}) : helper)))\n    + \" alt=\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"name\") || (depth0 != null ? lookupProperty(depth0,\"name\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"name\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":40},\"end\":{\"line\":2,\"column\":48}}}) : helper)))\n    + \">\\r\\n    <div class=\\\"movie-info\\\">\\r\\n        <p class=\\\"film-title\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"name\") || (depth0 != null ? lookupProperty(depth0,\"name\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"name\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":30},\"end\":{\"line\":4,\"column\":38}}}) : helper)))\n    + \"</p>\\r\\n        <p>\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"year\") || (depth0 != null ? lookupProperty(depth0,\"year\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"year\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":11},\"end\":{\"line\":5,\"column\":19}}}) : helper)))\n    + \"</p>\\r\\n        <p class=\\\"film-about-text\\\"> \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"description\") || (depth0 != null ? lookupProperty(depth0,\"description\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"description\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":6,\"column\":36},\"end\":{\"line\":6,\"column\":51}}}) : helper)))\n    + \" </p>\\r\\n        <button class=\\\"modal-close-button\\\"></button>        \\r\\n        <button class=\\\"star-icon-modal\\\"></button>\\r\\n        <div class=\\\"genres\\\">\\r\\n            <p>Genres: \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"genres\") || (depth0 != null ? lookupProperty(depth0,\"genres\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"genres\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":10,\"column\":23},\"end\":{\"line\":10,\"column\":33}}}) : helper)))\n    + \"</p>\\r\\n            <p>Director: \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"director\") || (depth0 != null ? lookupProperty(depth0,\"director\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"director\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":11,\"column\":25},\"end\":{\"line\":11,\"column\":37}}}) : helper)))\n    + \"</p>\\r\\n            <p>Starring: \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"starring\") || (depth0 != null ? lookupProperty(depth0,\"starring\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"starring\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":12,\"column\":25},\"end\":{\"line\":12,\"column\":37}}}) : helper)))\n    + \"</p>\\r\\n        </div>\\r\\n    </div>\\r\\n\\r\\n</div>\";\n},\"useData\":true});","export function isMovieInFavourites(movie) {\r\n  let addedToLocalstorage = JSON.parse(localStorage.getItem('favourites'));\r\n  if (!addedToLocalstorage) return false;\r\n  return addedToLocalstorage.find(data => data.id === movie.id);\r\n}\r\n\r\nexport function saveMovieToFavourites(movie) {\r\n  if (!isMovieInFavourites(movie)) {\r\n    let addedToLocalstorage = JSON.parse(localStorage.getItem('favourites'));\r\n    if (!addedToLocalstorage) addedToLocalstorage = [];\r\n    addedToLocalstorage.push(movie);\r\n    localStorage.setItem('favourites', JSON.stringify(addedToLocalstorage));\r\n  }\r\n}\r\n\r\nexport function removeMovieFromFavourites(movie) {\r\n  let addedToLocalstorage = JSON.parse(localStorage.getItem('favourites'));\r\n  if (!addedToLocalstorage) addedToLocalstorage = [];\r\n  addedToLocalstorage.forEach(data => {\r\n    if (data.id === movie.id) {\r\n      addedToLocalstorage.splice(addedToLocalstorage.indexOf(data), 1);\r\n    }\r\n  });\r\n  localStorage.setItem('favourites', JSON.stringify(addedToLocalstorage));\r\n}\r\n","export default {\r\n  gallery: document.querySelector('.movie-gallery-list'),\r\n  modalContent: document.querySelector('.modal-content'),\r\n  overlay: document.querySelector('.modal-overlay'),\r\n  modalWindow: document.querySelector('.modal'),\r\n  modalFavBtn: document.querySelector('.star-icon-modal'),\r\n  closeModalBtn: document.querySelector('.modal-close-button'),\r\n  favSection: document.querySelector('.section-fav'),\r\n  favMovies: document.querySelectorAll('.movie-name'),\r\n  allMovies: document.querySelectorAll('.movie-gallery-item'),\r\n};\r\n","import refs from './refs.js';\r\nimport favTemplate from '../templates/fav-window.hbs';\r\nimport { fetchMovieById } from './modal-window.js';\r\n\r\nexport function markupFavourites() {\r\n  let addedToLocalstorage = JSON.parse(localStorage.getItem('favourites'));\r\n  if (!addedToLocalstorage) addedToLocalstorage = [];\r\n  refs.favSection.innerHTML = '';\r\n  refs.favSection.insertAdjacentHTML('beforeend', '<h1>FAVOURITES</h1>');\r\n  addedToLocalstorage.forEach(data => {\r\n    markupFavouritesNode(data);\r\n  });\r\n}\r\n\r\nfunction markupFavouritesNode(data) {\r\n  const markup = favTemplate(data);\r\n  refs.favSection.insertAdjacentHTML('beforeend', markup);\r\n\r\n  const favMovies = document.querySelectorAll('.movie-name');\r\n  if (favMovies.length) {\r\n    const favMovie = favMovies[favMovies.length - 1];\r\n    favMovie.addEventListener('click', function () {\r\n      fetchMovieById(data.id);\r\n    });\r\n  }\r\n\r\n  const deleteBtns = document.querySelectorAll('.delete-movie-btn');\r\n  if (deleteBtns.length) {\r\n    const deleteBtn = deleteBtns[deleteBtns.length - 1];\r\n    deleteBtn.addEventListener('click', removeFromFav(data));\r\n  }\r\n}\r\n\r\nfunction removeFromFav(data) {\r\n  return function () {\r\n    let addedToLocalstorage = JSON.parse(localStorage.getItem('favourites'));\r\n    addedToLocalstorage.forEach(movie => {\r\n      if (movie.id === data.id) {\r\n        addedToLocalstorage.splice(addedToLocalstorage.indexOf(movie), 1);\r\n      }\r\n    });\r\n    localStorage.setItem('favourites', JSON.stringify(addedToLocalstorage));\r\n\r\n    const allMovies = document.querySelectorAll('.movie-gallery-item');\r\n    allMovies.forEach(movie => {\r\n      if (parseInt(movie.dataset.id) === data.id) {\r\n        const starBtn = movie.querySelector('.star-icon');\r\n        starBtn.style.backgroundColor = 'transparent';\r\n      }\r\n    });\r\n\r\n    this.parentNode.parentNode.removeChild(this.parentNode);\r\n  };\r\n}\r\n","import {\r\n  isMovieInFavourites,\r\n  saveMovieToFavourites,\r\n  removeMovieFromFavourites,\r\n} from './localstorage';\r\nimport { markupFavourites } from './favourite-list';\r\n\r\nexport function favBtnHandler(data) {\r\n  return function () {\r\n    if (!isMovieInFavourites(data)) {\r\n      saveMovieToFavourites(data);\r\n      this.style.backgroundColor = 'orange';\r\n    } else {\r\n      removeMovieFromFavourites(data);\r\n      this.style.backgroundColor = 'transparent';\r\n    }\r\n\r\n    markupFavourites();\r\n  };\r\n}\r\n\r\nexport function modalFavBtnHandler(data) {\r\n  return function () {\r\n    if (!isMovieInFavourites(data)) {\r\n      saveMovieToFavourites(data);\r\n      this.style.backgroundColor = 'orange';\r\n      updateFavButton(data, true);\r\n    } else {\r\n      removeMovieFromFavourites(data);\r\n      this.style.backgroundColor = 'transparent';\r\n      updateFavButton(data, false);\r\n    }\r\n    markupFavourites();\r\n  };\r\n}\r\n\r\nfunction updateFavButton(movie, isEnabled) {\r\n  const allMovies = document.querySelectorAll('.movie-gallery-item');\r\n  allMovies.forEach(data => {\r\n    if (parseInt(data.dataset.id) === movie.id) {\r\n      const starBtn = data.querySelector('.star-icon');\r\n      starBtn.style.backgroundColor = isEnabled ? 'orange' : 'transparent';\r\n    }\r\n  });\r\n}\r\n","import modalTemplate from '../templates/modal-window.hbs';\r\nimport { fetchMovies } from './movie-list.js';\r\nimport { isMovieInFavourites } from './localstorage.js';\r\nimport { modalFavBtnHandler } from './favourite-btn-handler';\r\nimport refs from './refs.js';\r\n\r\nfetchMovies();\r\n\r\nrefs.gallery.addEventListener('click', modalWindowHandler);\r\nrefs.overlay.addEventListener('click', onOverlayClickHandler);\r\n\r\nfunction modalWindowHandler(event) {\r\n  if (event.target.nodeName !== 'IMG') {\r\n    return;\r\n  }\r\n  let film_ID = event.target.dataset.id;\r\n  fetchMovieById(film_ID);\r\n}\r\n\r\nexport function fetchMovieById(id) {\r\n  const url = `https://my-json-server.typicode.com/moviedb-tech/movies/list/${id}`;\r\n\r\n  return fetch(url)\r\n    .then(res => res.json())\r\n    .then(data => {\r\n      modalMarkup(data);\r\n      const modalFavBtn = document.querySelector('.star-icon-modal');\r\n      if (isMovieInFavourites(data)) {\r\n        modalFavBtn.style.backgroundColor = 'orange';\r\n      }\r\n      modalFavBtn.addEventListener('click', modalFavBtnHandler(data));\r\n    })\r\n    .catch(err => console.log(err));\r\n}\r\n\r\nfunction modalMarkup(data) {\r\n  refs.modalWindow.classList.remove('is-hidden');\r\n  let movieGenres = [];\r\n  data.genres.forEach(el => {\r\n    movieGenres.push(' ' + el);\r\n  });\r\n  data.genres = movieGenres;\r\n  const markup = modalTemplate(data);\r\n  refs.modalContent.insertAdjacentHTML('beforeend', markup);\r\n  const closeModalBtn = document.querySelector('.modal-close-button');\r\n  closeModalBtn.addEventListener('click', onCloseModal);\r\n  window.addEventListener('keydown', onPressKey);\r\n}\r\n\r\nfunction onCloseModal() {\r\n  window.removeEventListener('keydown', onPressKey);\r\n  refs.modalWindow.classList.add('is-hidden');\r\n  refs.modalContent.innerHTML = '';\r\n}\r\n\r\nexport function onPressKey(event) {\r\n  if (event.code === 'Escape') onCloseModal();\r\n}\r\n\r\nfunction onOverlayClickHandler(event) {\r\n  if (event.target === event.currentTarget) {\r\n    onCloseModal();\r\n  }\r\n}\r\n","import movieCardTemplate from '../templates/movie-card.hbs';\r\nimport { favBtnHandler } from './favourite-btn-handler';\r\nimport {\r\n  isMovieInFavourites,\r\n  \r\n} from './localstorage';\r\nimport { markupFavourites } from './favourite-list';\r\nimport refs from './refs.js';\r\n\r\nexport function fetchMovies() {\r\n  const url = 'https://my-json-server.typicode.com/moviedb-tech/movies/list';\r\n\r\n  return fetch(url)\r\n    .then(res => res.json())\r\n    .then(data => markupList(data))\r\n    .catch(err => console.log(err));\r\n}\r\n\r\nexport function markupList(data) {\r\n  data.forEach(item => {\r\n    const markup = movieCardTemplate(item);\r\n    refs.gallery.insertAdjacentHTML('beforeend', markup);\r\n    const starBtns = document.querySelectorAll('.star-icon');\r\n    if (starBtns.length) {\r\n      const starBtn = starBtns[starBtns.length - 1];\r\n      starBtn.addEventListener('click', favBtnHandler(item));\r\n\r\n      if (isMovieInFavourites(item)) {\r\n        starBtn.style.backgroundColor = 'orange';\r\n        markupFavourites(item);\r\n      }\r\n    }\r\n  });\r\n}\r\n","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li class=\\\"fav-movie\\\">\\r\\n        <p class=\\\"movie-name\\\" data-id=\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"id\") || (depth0 != null ? lookupProperty(depth0,\"id\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"id\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":38},\"end\":{\"line\":2,\"column\":44}}}) : helper)))\n    + \">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"name\") || (depth0 != null ? lookupProperty(depth0,\"name\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"name\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":45},\"end\":{\"line\":2,\"column\":53}}}) : helper)))\n    + \"</p>\\r\\n        <span class=\\\"delete-movie-btn\\\">X</span>\\r\\n</li>\";\n},\"useData\":true});","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li class=\\\"movie-gallery-item\\\" data-id=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"id\") || (depth0 != null ? lookupProperty(depth0,\"id\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"id\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":40},\"end\":{\"line\":1,\"column\":46}}}) : helper)))\n    + \"\\\">\\r\\n    <img src=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"img\") || (depth0 != null ? lookupProperty(depth0,\"img\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"img\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":14},\"end\":{\"line\":2,\"column\":21}}}) : helper)))\n    + \"\\\" alt=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"name\") || (depth0 != null ? lookupProperty(depth0,\"name\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"name\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":28},\"end\":{\"line\":2,\"column\":36}}}) : helper)))\n    + \"\\\"\\r\\n        class=\\\"movie-gallery-cover\\\" data-id=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"id\") || (depth0 != null ? lookupProperty(depth0,\"id\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"id\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":45},\"end\":{\"line\":3,\"column\":51}}}) : helper)))\n    + \"\\\" >\\r\\n    \\r\\n    <p class=\\\"movie-gallery-title\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"name\") || (depth0 != null ? lookupProperty(depth0,\"name\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"name\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":35},\"end\":{\"line\":5,\"column\":43}}}) : helper)))\n    + \"</p>\\r\\n    <button type=\\\"button\\\" class=\\\"star-icon\\\"></button type=\\\"button\\\">\\r\\n    <p class=\\\"movie-gallery-title\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"year\") || (depth0 != null ? lookupProperty(depth0,\"year\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"year\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":7,\"column\":35},\"end\":{\"line\":7,\"column\":43}}}) : helper)))\n    + \"</p>\\r\\n\\r\\n\\r\\n</li>\\r\\n\";\n},\"useData\":true});"],"sourceRoot":""}